var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{d as o,o as n,c as r,a as i,t as u,r as c,b as d,w as p,e as v,f as m,g,v as y,u as E,h as x,p as T,i as f,F as b,j as w,k as L,l as R,m as O,T as C,n as S,q as h,s as A,x as I,y as P}from"./vendor.3ae097cf.js";var F=o({expose:[],props:{msg:String,color:String},setup(e){const t=e;return(a,l)=>(n(),r("button",{class:["flex-grow m-1 px-1 py-2 text-md text-gray-100 font-semibold rounded-lg shadow-md","red"===t.color?"bg-red-500":"bg-green-500"],sm:"flex-grow-0 px-6 py-4 my-10 text-base",bg:"hover:purple-700 active:purple-600"},[i(u(e.msg)+" ",1),c(a.$slots,"default")],2))}});const D={class:"mx-4 text-green-100 font-mono text-5xl font-semibold"};var K=o({expose:[],props:{price:{type:String,default:"0"}},setup(e){const t=e,a=d("↓");return p((()=>t.price),((e,t)=>{e.length>t.length||e>t?a.value="↑":a.value="↓"})),(t,l)=>(n(),r("div",D,[v("p",null,u(e.price.slice(0,9))+" "+u(a.value),1)]))}});const N=m({apiPublicKey:"",apiPrivateKey:""});var _,k,$,j,U,M,H,B,G,q,X,W,Y,z,V,J,Q,Z,ee,te,ae,le;(k=_||(_={})).INFO="INFO",k.OK="OK",k.ERR="ERR",(j=$||($={})).GET="GET",j.POST="POST",j.DELETE="DELETE",(M=U||(U={})).SELL="SELL",M.BUY="BUY",function(e){e.reverse=function(t){return t===e.SELL?e.BUY:e.SELL}}(U||(U={})),(B=H||(H={})).BOTH="BOTH",B.LONG="LONG",B.SHORT="SHORT",(q=G||(G={})).TRUE="TRUE",q.FALSE="FALSE",(W=X||(X={})).CONTRACT_PRICE="CONTRACT_PRICE",W.MARK_PRICE="MARK_PRICE",(z=Y||(Y={})).ACK="ACK",z.RESULT="RESULT",(J=V||(V={})).LIMIT="LIMIT",J.MARKET="MARKET",J.STOP="STOP",J.TAKE_PROFIT="TAKE_PROFIT",J.STOP_MARKET="STOP_MARKET",J.TAKE_PROFIT_MARKET="TAKE_PROFIT_MARKET",J.TRAILING_STOP_MARKET="TRAILING_STOP_MARKET",(Z=Q||(Q={})).NEW="NEW",Z.PARTIALLY_FILLE="PARTIALLY_FILLED",Z.FILLED="FILLED",Z.CANCELED="CANCELED",Z.EXPIRED="EXPIRED",Z.NEW_INSURANCE="NEW_INSURANCE",Z.NEW_ADL="NEW_ADL",(te=ee||(ee={})).NEW="NEW",te.CANCELED="CANCELED",te.CALCULATED="CALCULATED",te.EXPIRED="EXPIRED",te.TRADE="TRADE",(le=ae||(ae={})).GTC="GTC",le.IOC="IOC",le.FOK="FOK",le.GTX="GTX";let se=0;const oe=d([]),ne=(e,o="",n={})=>{let r=se++;return oe.value.push(((e,o)=>{for(var n in o||(o={}))a.call(o,n)&&s(e,n,o[n]);if(t)for(var n of t(o))l.call(o,n)&&s(e,n,o[n]);return e})({title:e,description:o,id:r,onCloseHandler:()=>ie(r)},n)),r},re=(e,t="",a=_.INFO)=>{ne(e,t,{messageType:a})},ie=e=>{const t=oe.value.findIndex((t=>e===t.id));oe.value.splice(t,1)},ue={offsetTime:37e3},ce=()=>(new Date).getTime()+ue.offsetTime,de=async(e,t,a={},l=console.log,s=console.log,o=!1,n=!1)=>{try{let s=o?{"X-MBX-APIKEY":N.apiPublicKey}:{},r=(e=>{let t="";for(let a in e)""!==t&&(t+="&"),t+=a+"="+encodeURIComponent(e[a]);return t})(a),i=n?`${t}?${r}&signature=${await(async(e,t)=>{let a=new TextEncoder,l=await window.crypto.subtle.importKey("raw",a.encode(e),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign","verify"]),s=await window.crypto.subtle.sign("HMAC",l,a.encode(t)),o=new Uint8Array(s);return Array.prototype.map.call(o,(e=>("00"+e.toString(16)).slice(-2))).join("")})(N.apiPrivateKey,r)}`:`${t}?${r}`;const u=await fetch(i,{method:e,headers:s});if(!u.ok)throw u;return l(await u.json())}catch(r){return s(r)}},pe=async e=>{if(console.log(e),e instanceof Response){let t=await e.json();console.log(t),re("Order Error",`${t.code}: ${t.msg}`,_.ERR)}else re("Network Error",e.message,_.ERR)};(async()=>{await de($.GET,"https://fapi.binance.com/fapi/v1/time",{},(e=>{ue.offsetTime=e.serverTime-(new Date).getTime()}))})();const ve=async(e,t)=>(re("Leverage Change Request Sent"),await(async(e,t,a=console.log,l=console.log)=>{const s={symbol:e,leverage:t,timestamp:ce()};return await de($.POST,"https://fapi.binance.com/fapi/v1/leverage",s,a,l,!0,!0)})(e,t,(e=>{console.log(e),re("Leverage Changed",`Leverage of ${e.symbol} changed to ${e.leverage}`,_.OK)}),pe)),me=async(e,t)=>(re("CANCEL SENT"),await(async(e,t,a=console.log,l=console.log)=>{const s={symbol:e,orderID:t,timestamp:ce()};return await de($.DELETE,"https://fapi.binance.com/fapi/v1/order",s,a,l,!0,!0)})(e,t,(e=>(console.log(e),re("ORDER CANCELED",`cancel ${e.side} ${e.origQty} at $${e.price}`,_.OK),e.id)),pe)),ge=async()=>await de($.POST,"https://fapi.binance.com/fapi/v1/listenKey",{},(e=>e.listenKey),pe,!0,!1),ye=async(e,t,a,l,s)=>(re("ORDER SENT"),await(async(e,t,a,l,s,o=console.log,n=console.log)=>{const r={symbol:e,side:t,type:a,quantity:l,price:s,timeInForce:ae.GTC,newOrderRespType:Y.RESULT,timestamp:ce()};return await de($.POST,"https://fapi.binance.com/fapi/v1/order",r,o,n,!0,!0)})(e,t,a,l,s,(e=>(console.log(e),re("ORDER CREATED",`${e.side} ${e.origQty} at $${e.price}`,_.OK),e.id)),pe)),Ee=m({}),xe=d(!1),Te=()=>!!xe.value||(re("NEED KEYS","please enter public and private keys",_.ERR),!1),fe=d();let be,we;const Le=m({}),Re={ORDER_TRADE_UPDATE:e=>{console.log(e);let t=Le[e.o.i]={id:e.o.i,tradePair:e.o.s,status:e.o.X,price:e.o.p,quantity:e.o.q,spentFee:e.o.n,side:e.o.S};t.status===Q.FILLED&&(re("ORDER FILLED",`${t.side} ${t.quantity} at ${t.price}`,_.OK),Ee[t.id]&&(ye(t.tradePair,U.reverse(t.side),V.STOP,parseFloat(t.quantity),Ee[t.id].stopPrice),ye(t.tradePair,U.reverse(t.side),V.LIMIT,parseFloat(t.quantity),Ee[t.id].profitPrice)))}};p(fe,(()=>{xe.value=!1,"string"==typeof fe.value&&(we||(we=window.setInterval(ge,36e5)),be&&be.close(),Object.assign(Le,{}),be=new WebSocket(`wss://fstream.binance.com/ws/${fe.value}`),be.addEventListener("message",(e=>{const t=JSON.parse(e.data);console.log(t),Re[t.e]&&Re[t.e](t)})),xe.value=!0)})),T("data-v-379bd38a");const Oe={key:0,class:"z-10 setbox absolute right-0 top-0 p-6 w-5/12 sm:w-96 h-screen bg-gray-500 bg-opacity-75"},Ce={class:"flex-row content-center justify-around"},Se={class:"absolute sm:bottom-10 bottom-1/4 right-0 flex justify-around px-5 w-full"};f();var he=o({expose:[],setup(e){const t=d(!1),a=()=>{t.value=!0},l=()=>{t.value=!1},s=()=>{(async()=>{fe.value=await ge()})(),l()};return(e,o)=>(n(),r("div",null,[v("button",{class:"circle z-10 absolute right-4 top-6 w-8 h-8 rounded-full transition-all duration-500",bg:"gray-800 hover:purple-800 active:purple-700",onClick:a}),t.value?(n(),r("div",Oe,[v("div",Ce,[g(v("input",{class:"text-input",type:"text",placeholder:"api-public-key","onUpdate:modelValue":o[1]||(o[1]=e=>E(N).apiPublicKey=e)},null,512),[[y,E(N).apiPublicKey]]),g(v("input",{class:"text-input",type:"text",placeholder:"api-private-key","onUpdate:modelValue":o[2]||(o[2]=e=>E(N).apiPrivateKey=e)},null,512),[[y,E(N).apiPrivateKey]])]),v("div",Se,[v(F,{class:"sm:m-5 sm:w-40",msg:"Confirm",color:"green",onClick:s}),v(F,{class:"sm:m-5 sm:w-40",msg:"Cancel",color:"red",onClick:l})])])):x("",!0)]))}});he.__scopeId="data-v-379bd38a";const Ae=e=>e,Ie=(e,t)=>{const a=Math.pow(10,t);return Math.round((e+Number.EPSILON)*a)/a};var Pe=o({expose:[],props:{msgs:{type:Array,required:!0},data:{type:String,required:!0}},setup(e){const t=e;return(a,l)=>(n(),r("select",{class:"flex-grow w-1 mx-1 px-2 py-1 text-white rounded-lg appearance-none cursor-pointer",bg:"gray-700 hover:purple-700 active:purple-600",sm:"mx-4 px-4 py-3",value:e.data,onInput:l[1]||(l[1]=e=>a.$emit("update:data",E(Ae)(e.target).value))},[(n(!0),r(b,null,w(t.msgs,(e=>(n(),r("option",{key:e,class:"bg-gray-700 m-100"},u(e),1)))),128))],40,["value"]))}});T("data-v-28450447");const Fe={class:"flex flex-col mx-1"},De={class:"text-base font-bold text-gray-700"},Ke={key:0,class:"text-sm m-1"},Ne=v("p",{class:"text-2xl text-gray-700 transition-all duration-70","group-hover":"text-red-500 text-4xl font-extrabold"}," × ",-1);f();var _e=o({expose:[],props:{title:String,description:String,onCloseHandler:{type:Function,required:!0},timeout:{type:Number,default:1e4},messageType:{type:String,default:_.INFO}},setup(e){const t=e,{progress:a,startTimer:l,pauseTimer:s}=((e,t)=>{let a=0,l=0;const s=d(t),o=L((()=>s.value/t*100)),n=()=>{clearInterval(l),clearTimeout(a)};return R((()=>{n()})),{progress:o,startTimer:()=>{l=window.setInterval((()=>{s.value-=100}),100),a=window.setTimeout(e,s.value+100)},pauseTimer:n}})(t.onCloseHandler,t.timeout);O((()=>{l()}));const{swipedDiff:o,isSwiping:i,startSwipe:c,endSwipe:m}=(()=>{let e=0;const t=d(0),a=d(!1),l=l=>{a.value&&(t.value=e-l.clientX)},s=()=>{a.value=!1,t.value=0,e=0,removeEventListener("mousemove",l)};return O((()=>{addEventListener("mouseup",s)})),R((()=>{s(),removeEventListener("mouseup",s)})),{swipedDiff:t,isSwiping:a,startSwipe:t=>{a.value=!0,e=t.clientX,addEventListener("mousemove",l)},endSwipe:s}})();return p(o,(()=>{Math.abs(o.value)>200&&(m(),t.onCloseHandler())})),(d,p)=>(n(),r("div",{class:["m-2 relative flex justify-between min-h-16 overflow-hidden py-3 px-2 w-full sm:w-72 rounded-lg select-none",t.messageType],onMouseenter:p[2]||(p[2]=(...e)=>E(s)&&E(s)(...e)),onMouseleave:p[3]||(p[3]=(...e)=>E(l)&&E(l)(...e)),onMousedown:p[4]||(p[4]=(...e)=>E(c)&&E(c)(...e)),style:{right:`${E(o)}px`,transition:E(i)?"none":"transition: all .5s linear"}},[v("div",Fe,[v("div",De,u(e.title),1),e.description&&e.description.length>0?(n(),r("div",Ke,u(e.description),1)):x("",!0)]),v("div",{class:"group cursor-pointer",onClick:p[1]||(p[1]=(...t)=>e.onCloseHandler&&e.onCloseHandler(...t))},[Ne]),v("div",{class:"absolute h-3.5 -bottom-2 -ml-2 rounded transition-all duration-200 ease-linear w-",gradient:"to-r from-teal-100 via-pink-100 to-purple-300",style:{width:`${E(a)}%`}},null,4)],38))}});_e.__scopeId="data-v-28450447";const ke=S();var $e=o({expose:[],setup(e){let t=e=>{let t=e,a=t.getBoundingClientRect().top+window.scrollY-9;t.style.position="absolute",t.style.top=`${a}px`};return(e,a)=>(n(),r("div",null,[v("div",null,[v(C,{name:"bounce",tag:"div",class:"flex flex-col justify-start items-end fixed right-0 top-0 p-4 z-10 <sm:w-1/2",onLeave:E(t)},{default:ke((()=>[(n(!0),r(b,null,w(E(oe),(e=>(n(),r(_e,h(e,{key:e.id}),null,16)))),128))])),_:1},8,["onLeave"])])]))}});$e.__scopeId="data-v-65a201fc";var je=o({expose:[],setup(e){const t=d(!1);return(e,a)=>(n(),r("div",{class:t.value?"using-mouse":"using-keyborad",onMousedown:a[1]||(a[1]=()=>{t.value=!0}),onKeyup:a[2]||(a[2]=A((()=>{t.value=!1}),["tab"]))},[c(e.$slots,"default")],34))}});const Ue=d("0"),Me=d(0),He=d(0),Be=d(0),Ge=m([0]);let qe=0;const Xe=L((()=>Ge.reduce(((e,t)=>e+t))/Ge.length)),We=L((()=>(Ge.reduce(((e,t)=>e+(t-Xe.value)**2))/Ge.length)**.5)),Ye={"btcusdt@aggTrade":e=>{e.T-Be.value>0&&(Ue.value=e.p,Be.value=e.T,He.value++)},"btcusdt@miniTicker":e=>{const t=parseFloat(e.c);0===Me.value&&(Me.value=t),Me.value-=.03*(Me.value-t),Ge[qe]=t,qe=(qe+1)%30}},ze=Object.keys(Ye).join("/");new WebSocket(`wss://fstream.binance.com/stream?streams=${ze}`).addEventListener("message",(e=>{const{stream:t,data:a}=JSON.parse(e.data);Ye[t](a)}));const Ve={class:"text-light-100 m-2 my-5 font-mono"},Je={class:"flex justify-between border-2 text-center py-5 px-2 rounded-xl"},Qe={class:"text-center"},Ze=i("CANCEL");var et=o({expose:[],setup(e){let t=e=>{Te()&&me(e.tradePair,e.id)};return(e,a)=>(n(),r("div",Ve,[(n(!0),r(b,null,w(E(Le),(e=>(n(),r("div",Je,[v("div",Qe,u(e),1),v(F,{color:"red",class:"!p-2 !m-0",onClick:a=>E(t)(e)},{default:I((()=>[Ze])),_:2},1032,["onClick"])])))),256))]))}});const tt=S();T("data-v-59e0c2fd");const at=v("div",{class:"fixed bg-gray-800 overflow-hidden -z-10 w-2/1 h-2/1 -top-1/2"},null,-1),lt={class:"contianer p-1 sm:p-10 min-h-screen bg-gray-800 bg-cover"},st={class:"mx-auto p-8 max-w-2xl text-center text-white font-mono bg-gray-700 rounded-xl shadow-md overflow-hidden"},ot={class:"m-2 sm:m-8"},nt={class:"inline-block w-4"},rt={class:"inline-block w-4"},it=v("br",null,null,-1),ut=i("feeRate: "),ct={class:"flex justify-around mx-auto max-w-xl"},dt={class:"flex justify-around mx-auto font-mono"};f();var pt=o({expose:[],setup(e){const t=d("BTCUSDT"),a=()=>{Te()&&(async(e,t,a,l,s,o,n)=>{let r=await ye(e,t,a,l,s);"number"==typeof r&&(Ee[r]={stopPrice:o,profitPrice:n})})("BTCUSDT",U.BUY,V.LIMIT,s.value,Ie(w.value,2),Ie(w.value+I.value,2),Ie(w.value+_.value,2))},l=d(.036),s=d(.001),o=d(L((()=>parseFloat(Ue.value)))),c=[1,2,5,25,50,75,100,125].reduce(((e,t)=>(e[t+"x"]=t,e)),{}),m=d(Object.keys(c)[Object.keys(c).length-1]),x=L((()=>c[m.value]));p((()=>xe.value&&x.value),(()=>xe.value&&ve(t.value,x.value)));const T=[0,.1,.3,.5,.7,1,2,3,5,10],f=T.reduce(((e,t)=>(e[`p - ${t}*std30`]=t,e)),{}),b=d(Object.keys(f)[5]),w=L((()=>o.value-f[b.value]*We.value)),R=L((()=>w.value*s.value)),O=L((()=>.01*l.value*w.value)),C=L((()=>l.value*x.value*R.value*.01)),S=L((()=>l.value*x.value)),h=T.reduce(((e,t)=>(e[`op - ${t}*std30`]=t,e)),{}),A=d(Object.keys(h)[5]),I=L((()=>-h[A.value]*We.value)),P=L((()=>I.value/w.value*x.value*100)),D=T.reduce(((e,t)=>(e[`op + ${t}*std30`]=t,e)),{}),N=d(Object.keys(D)[5]),_=L((()=>D[N.value]*We.value)),k=L((()=>_.value/w.value*x.value*100));return(e,t)=>(n(),r(je,null,{default:tt((()=>[at,v(he),v($e),v("div",lt,[v("div",st,[v(K,{price:E(Ue)},null,8,["price"]),v("div",ot,[v("p",null,[i(" priceMeanRolling: "+u(E(Me).toFixed(2))+" ",1),v("span",nt,"("+u((o.value-E(Me)).toFixed(2))+")",1)]),v("p",null,[i(" priceMean30: "+u(E(Xe).toFixed(2))+" ",1),v("span",rt,"("+u((o.value-E(Xe)).toFixed(2))+")",1)]),v("p",null,"priceSTD30: "+u(E(We).toFixed(2))+" ("+u((E(We)/E(Me)*100).toFixed(4))+"%)",1),v("p",null,"count: "+u(E(He)),1)]),v("p",null," openPrice: "+u(E(w).toFixed(2))+" ("+u((E(w)-o.value).toFixed(2))+"/"+u(((E(w)-o.value)/o.value*100).toFixed(4))+"%) ",1),v("p",null," noLossPrice: "+u((E(w)+E(O)).toFixed(2))+" / "+u((E(w)-E(O)).toFixed(2))+" ("+u(E(O).toFixed(2))+"/"+u((l.value*E(x)).toFixed(4))+"%) ",1),v("p",null," upPrice: "+u((E(w)+E(_)).toFixed(2))+" ("+u(E(_).toFixed(2))+"/"+u(E(k).toFixed(4))+"%) ",1),v("p",null," downPrice: "+u((E(w)+E(I)).toFixed(2))+" ("+u(E(I).toFixed(2))+"/"+u(E(P).toFixed(4))+"%) ",1),it,v("p",null,"leverage: "+u(E(x)+"x"),1),v("p",null,[i(" orderAmount: USDT "+u(E(R).toFixed(2))+" / BTC ",1),g(v("input",{class:"tiny-input",type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e)},null,512),[[y,s.value]])]),v("p",null," leveredOrderAmount: USDT "+u((E(R)*E(x)).toFixed(2))+" / BTC "+u((s.value*E(x)).toFixed(4)),1),v("p",null,[ut,g(v("input",{class:"tiny-input",type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>l.value=e)},null,512),[[y,l.value]])]),v("p",null,"leveredFee: "+u(E(C).toFixed(4))+" ("+u(E(S).toFixed(4))+"%)",1)]),v("div",ct,[v(F,{msg:"Long2",color:"green",onClick:a}),v(F,{msg:"Long1",color:"green"}),v(F,{msg:"Short1",color:"red"}),v(F,{msg:"Short2",color:"red"})]),v("div",dt,[v(Pe,{msgs:Object.keys(E(c)),data:m.value,"onUpdate:data":t[3]||(t[3]=e=>m.value=e)},null,8,["msgs","data"]),v(Pe,{msgs:Object.keys(E(f)),data:b.value,"onUpdate:data":t[4]||(t[4]=e=>b.value=e)},null,8,["msgs","data"]),v(Pe,{msgs:Object.keys(E(h)),data:A.value,"onUpdate:data":t[5]||(t[5]=e=>A.value=e)},null,8,["msgs","data"]),v(Pe,{msgs:Object.keys(E(D)),data:N.value,"onUpdate:data":t[6]||(t[6]=e=>N.value=e)},null,8,["msgs","data"])]),v(et)])])),_:1}))}});pt.__scopeId="data-v-59e0c2fd";P(pt).mount("#app");
